var win=window,doc=document,nav=navigator,mdFirst=!1,mdScripts=[],midaObs={},mdChange={},mdWaitEl={},_goalProfile={},_versionHistory=[],mdIsBot=!1,cacheVersion="1.0.61";function getTimestamp(){return+new Date}function isIOS(){return/iPad|iPhone|iPod/.test(nav.userAgent)&&!win.MSStream}function safeParse(e){try{return"string"==typeof e?JSON.parse(e):e}catch(e){return{}}}win._executedTests=new Set,win.md_int_list={},win.mdq=win.mdq||[],console.log("mida v"+cacheVersion),win.md_cdn||(win.md_cdn="https://cdn.mida.so"),void 0===win.md_cache&&(win.md_cache=!0),win._h_key=findKeyAttribute("key")||win._h_key;var _midaUrlParam=new URLSearchParams(win.location.search),editorKey=_midaUrlParam.get("editor")||null,checkCookieBanner=findKeyAttribute("cookie"),ls=checkCookieBanner?sessionStorage:localStorage;win.mida={isLoaded:!1,backend_url:"https://api.mida.so",preview:{},uuid:(win._h_uuid,function(){return new Promise(e=>{const t=()=>{win._h_uuid?e(win._h_uuid):setTimeout(t,100)};t()})}),user_id:null,hasConsent:!checkCookieBanner,isRedirect:!1,userID:function(e){this.user_id=e},grantConsent:function(e){console.log("[Mida] grant consent",e),e?(this.hasConsent=!0,ls.setItem("mida_consent","yes"),win._abcache&&ls.setItem("_abcache",win._abcache),win.vaId&&ls.setItem("_variant_result",win.vaId),mida.setCookie("optimize_uuid",win._h_uuid),sendVariant()):ls.setItem("mida_consent","no")},execute:function(e){var t=ls.getItem("_abcache")||win._abcache;t&&e&&(win.midaTesting(t,Number(e)),setTimeout(win.mpw(),2e3))},version:function(e){return e?null!==(e=this.getVariant(e))&&0===Number(e)?"Control":e:(e=ls.getItem("_variant_result"))?(e=Object.entries(JSON.parse(e)).reduce((e,[t,i])=>(e[t]=i.vaId,e),{}),Object.entries(e).map(([e,t])=>({testId:e,variant:0===t?"Control":t}))):[]},getVariant:function(e){let t=null;var i=win.vaId||ls.getItem("_variant_result");return i?(i=(i=safeParse(i))&&i[Number(e)],t=i&&"vaId"in i?i.vaId:t):null},init:function(e){win._h_key=e},identify:function(e){return new Promise(function(t){e.hid=win._h_uuid,mida.fetch("/track/"+win._h_key,"POST",e,function(e){e=safeParse(e);win._h_uuid=e.id,win.mida.uuid=e.id,win._hid=e.id,mida.setCookie("optimize_uuid",e.id),t()})})},track:function(n,t={}){t.url_origin=win.location.origin,t.url_path=win.location.pathname;let r=getTimestamp();try{var e=JSON.parse(ls.getItem("md_pending_events")||"[]");e.push({event_text:n,event_property:t,session:win._h_session,widget_key:win._h_key,uuid:win._h_uuid,url:win.location.origin+win.location.pathname,href:win.location.href,timestamp:r}),ls.setItem("md_pending_events",JSON.stringify(e))}catch(e){console.error("Failed to save event to localStorage:",e)}return new Promise(function(i){var e={event_text:n,event_property:JSON.stringify(t),session:win._h_session,widget_key:win._h_key,uuid:win._h_uuid,url:win.location.origin+win.location.pathname,href:win.location.href};try{"Purchase"===n&&window._revenueGoals&&window._revenueGoals.length&&window._revenueGoals.forEach(e=>{e.goal_id&&(mida.track("goal_"+e.goal_id),mida.converted(e.test_key))})}catch(e){}setTimeout(()=>{var e=_goalProfile[n];e&&(e.timestamp=r,e.event_name=n,e.variant=null===e.variant?mida.getVariant(e.id):e.variant,executeIntegration(e))},100),mida.fetch("/event/addv3","POST",e,function(e){try{var t=JSON.parse(ls.getItem("md_pending_events")||"[]").filter(e=>e.event_text!==n||e.timestamp!==r);ls.setItem("md_pending_events",JSON.stringify(t))}catch(e){console.error("Failed to update pending events:",e)}i()})})},converted:function(e){return new Promise(function(t){mida.fetch("/abtest/convertedv3","POST",{key:e,uuid:win._h_uuid,k:win._h_key},function(e){t()})})},revenue:function(e){return new Promise(function(t){e.uuid=win._h_uuid,e.k=win._h_key,mida.fetch("/abtest/convertedv3","POST",e,function(e){t()})})},features:[],cachedFeatureFlag:function(){var e=ls.getItem("md_ff")||null;return e?(this.features=safeParse(e),this.features):[]},isFeatureEnabled:function(e){return this.features=this.cachedFeatureFlag(),this.features.includes(e)},onFeatureFlags:function(e){let t=this.cachedFeatureFlag().length;this.reloadFeatureFlags().then(()=>{t||e()}).catch(e=>console.error(e)),t&&e()},reloadFeatureFlags:function(){return new Promise((t,i)=>{mida.fetch("/feature-flag","POST",{uuid:win._h_uuid,k:win._h_key,user_id:this.user_id,lang:nav.language,url:win.location.href},e=>{try{this.features=JSON.parse(e),ls.setItem("md_ff",JSON.stringify(this.features)),t()}catch(e){i(e)}})})},setCookie:function(e,t,i=365,n="d"){var r=new Date,a=doc.domain;mida.hasConsent?"h"===n?r.setHours(r.getHours()+i):"m"===n?r.setMinutes(r.getMinutes()+i):"s"===n?r.setSeconds(r.getSeconds()+i):r.setDate(r.getDate()+i):r.setMinutes(r.getMinutes()+1),doc.cookie=e+"="+t+";expires="+r.toString()+";domain="+a+";path=/;"},getCookie:function(e){e=doc.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return e?e.pop():""},fetch(e,r,a,s,o=!1){const c=(t=0)=>{const i=new XMLHttpRequest;i.open(r,""+this.backend_url+e,!0),i.setRequestHeader("Content-Type",o?"text/plain":"application/json;charset=UTF-8");let n=!1;i.onreadystatechange=function(){if((this.readyState===i.LOADING||this.readyState===i.DONE)&&200===this.status&&!n)try{if(i.responseText&&0<i.responseText.length){var e=i.responseText;if(e.startsWith("{")||e.startsWith("["))try{JSON.parse(e)}catch(e){return void console.error(e)}n=!0,s(e)}}catch(e){}this.readyState===i.DONE&&(200!==this.status?t<1&&c(t+1):n||s(i.responseText))},i.send(JSON.stringify(a))};c()}},win.md_api&&(mida.backend_url=win.md_api);let _previewId=_midaUrlParam.get("test-preview")||sessionStorage.getItem("preview-id"),_previewVariant=(_previewId&&(mida.preview.id=_previewId,sessionStorage.setItem("preview-id",_previewId)),_midaUrlParam.get("test-variant")||sessionStorage.getItem("preview-variant"));function processEvent(){}function executeIntegration(){}function showToast(){}function queryElement(e){return new Promise(t=>{const i=e.replace(/\.+(\s|$|:|>)/g,"$1").replace(/\.\./g,".").replace(/(?:^|\s)\.(?=\s|$)/g,"").trim();setTimeout(()=>{var e=doc.querySelector(i);t(e||null)})})}_previewVariant&&(mida.preview.variant=_previewVariant,sessionStorage.setItem("preview-variant",_previewVariant)),mida.hasConsent||(mida.hasConsent="yes"===(ls.getItem("mida_consent")||"no")),_readParam("verify")===win._h_key&&mida.fetch("/widget/active/"+win._h_key,"GET",{},()=>{}),win.midaTesting=async(e,h=null)=>{win.applyStart=getTimestamp();var w,_,t=safeParse(e);if(h&&(_versionHistory=[]),e&&t)for(let e=0;e<t.length;e++){let u=t[e],m=u.test_id;var v,f=u.test_name,p=u.trigger_variant_change;if(!(win._executedTests.has(m)||h&&h!==m||!h&&"donotstart"===p)&&((!mida.preview.id||(_mdLoad("/js/mida-preview.js?v="+cacheVersion),Number(m)===Number(mida.preview.id)))&&u)){try{"{}"!==u.integration&&(v=safeParse(u.integration),win.md_int_list[m]=v)}catch(e){}let r=!1,n,a=(n=safeParse(u.data),[]);try{Object.keys(n).forEach(function(e){var t,i=n[e];for(let e=0;e<i.length;e++)i[e].data.length&&(t=i[e].data[0])&&t.url&&a.push(t.url)})}catch(e){console.error(e)}let e=win.location,t=e.protocol+"//"+_removeWww(e.hostname)+e.pathname,i=e.protocol+"//www."+_removeWww(e.hostname)+e.pathname,s=new URL(window.location.href),o=new URLSearchParams(s.search),c=(o.delete("test-preview"),o.delete("test-variant"),s.search=o.toString(),s.toString()),d=!1;var g=safeParse(u.data);let l=[t,_removeTrail(t),i,_removeTrail(i),_removeTrail(c),_removeWww(c)];if(d=Object.keys(g).find(t=>l.some(e=>{return new RegExp("^"+t.replace(/\*/g,".*").replace(/\?/g,"\\?").replace(/\/+$/g,"").replace("//www.","//(www.)?")+"$","i").test(e.toLowerCase())})),!h&&"direct"!==p&&"URLChange"===p){let e="";midaObs[m]||(midaObs[m]=new MutationObserver(function(){location.href!==e&&(e=location.href,mida.execute(m))}),midaObs[m].observe(doc,j={subtree:!0,childList:!0}))}if(d=u.test_url_rule&&!urlRuleMatch(u.test_url_rule,e.href)?!1:d)if(win.abdata=g[d],h||"direct"===p){var g=!u.is_ab,y=null;let e=null,t=null,i=null,n=mida.getVariant(u.test_id);null!==(n=mida.preview.variant?mida.preview.variant.replace(/_/," "):n)&&!g||(u.result=safeParse(u.result),getExperimentRoute(u,g));var b=mida.getVariant(u.test_id);if((b=!mida.preview.variant&&0!==mida.preview.variant?b:mida.preview.variant.toString().replace(/_/," "))&&(g=win.abdata.filter(e=>e.name===b)).length&&(y=(g=g[0]).data,e=g.customCSS||null,t=g.customJS||null),0===Number(b)){var g=u.control_attr&&u.control_attr.js,T=u.control_attr&&u.control_attr.css;if(T&&insertCustomElement(T,"cocss","css"),g){let e="cjs_"+m;insertCustomElement(`function ${e}() { ${g} }`,e),setTimeout(()=>{try{window[e+"x"]||window[e](),window[e+"x"]=!0}catch(e){console.error("Error executing control JS:",e)}},20)}}if(_goalProfile["goal_"+u.goal_id]={id:m,name:f,variant:b},"event"===u.goal_type&&(_goalProfile[u.goal_value]={id:m,name:f,variant:b}),y){function S(e,t,i){var[n,r]=e.split("?"),[a,s]=t.split("?"),o=n.split("/"),c=a.split("/");let d=-1;var l,u=[];function m(e,t){return t&&(t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(t.replace("\\*","(.+)")),e=e.match(t))&&e[1]?e[1]:""}if((a=(n=i).indexOf("*"))===n.lastIndexOf("*")&&-1!==a)return n=m(_removeWww(e),_removeWww(i)),t.replace("*",n);for(let e=0;e<c.length;e++)c[e].includes("*")?(d=-1!==o.indexOf(c[e-1])?o.indexOf(c[e-1])+1:o.length-1,l=m(o[d],c[e]),u.push(c[e].replace("*",l)),o.splice(d,1)):u.push(c[e]);c.includes("*")&&-1!==d&&(a=o.slice(d),u.push(...a));let h=u.join("/"),w="";return r&&s&&(w=m(r,s)),s&&(h+="?"+s.replace("*",w)),h}function E(t){return new Promise(e=>setTimeout(e,t))}for(let e=0;e<y.length;e++){let n=y[e];var I,k,P=n.url;try{var O,C,x=new win.URL(P),L=win.location.href,M=S(L,P,d),N=S(L,P,P);!(P.includes("*")&&_removeWww(M)!==_removeWww(L)&&_removeWww(N)!==_removeWww(L)||!P.includes("*")&&(_removeWww(win.location.hostname)!==_removeWww(x.hostname)||win.location.pathname!==x.pathname||x.search&&!win.location.search.includes(x.search)||x.hash&&win.location.hash!==x.hash))||(i=P.includes("*")&&P!=L?M:P,O=document.head.innerHTML.includes("previewBarInjector"),C=i.includes("preview_theme_id="),O&&C)||(mida.isRedirect||(isIOS()&&await sendVariant(),mida.setCookie("mida_redirect","true",20,"s"),win.location.href=n.relay_param?function(e,t){var i,n,[e,t]=[new URL(e),new URL(t)],[r,a]=[e.searchParams,t.searchParams];for([i,n]of r)a.has(i)||a.set(i,n);return e.hash&&(t.hash=e.hash),t.toString()}(L,i):i),mida.isRedirect=!0)}catch(e){}try{let i=e+JSON.stringify(n);!_versionHistory.includes(i)&&"rm"in n?(await queryElement(n.rm).then(e=>{e&&(e.parentNode.removeChild(e),_versionHistory.push(i),r=!0)}),await E(10)):!_versionHistory.includes(i)&&n.dir&&n.oriEl&&n.refEl?(I=await queryElement(n.oriEl),k=await queryElement(n.refEl),mida.preview.variant&&I&&I instanceof HTMLElement&&I.classList.add("abhighlight"),I&&k&&"a"===n.dir&&(w=I,(_=k)&&w&&_.nextSibling&&_.parentNode.insertBefore(w,_.nextSibling),_versionHistory.push(i),r=!0),I&&k&&"b"===n.dir&&(k.parentNode.insertBefore(I,k),_versionHistory.push(i),r=!0),await E(10)):!_versionHistory.includes(i)&&n.dir&&n.refEl&&"htmlBlock"in n?(await queryElement(n.refEl).then(e=>{e&&(e.insertAdjacentHTML("a"===n.dir?"afterend":"b"===n.dir?"beforebegin":"p"===n.dir?"afterbegin":"",n.htmlBlock),_versionHistory.push(i),r=!0)}),await E(10)):n.target&&await queryElement(n.target).then(t=>{var e;t&&t instanceof HTMLElement&&(e=["style","class"],["textContent","innerText","innerHTML","src","href"].forEach(e=>{e in n&&(t[e]=n[e])}),e.forEach(e=>{e in n&&t.setAttribute(e,n[e])}),!_versionHistory.includes(i)&&"outerHTML"in n&&(t.outerHTML=n.outerHTML,_versionHistory.push(i),r=!0),mida.preview.variant)&&t.classList.add("abhighlight")})}catch(e){console.error(e)}}}if(e&&insertCustomElement(e,"mcss_"+m,"css"),t){let e="mjs_"+m;insertCustomElement(`function ${e}() { ${t} }`,e),setTimeout(()=>{try{window[e+"x"]||window[e](),window[e+"x"]=!0}catch(e){}},20)}if(u.custom_css&&insertCustomElement(u.custom_css,"mccss_"+m,"css"),u.custom_js){let e="mcjs_"+m;insertCustomElement(`function ${e}() { ${u.custom_js} }`,e),setTimeout(()=>{try{window[e+"x"]||window[e](),window[e+"x"]=!0}catch(e){}},20)}r&&win._executedTests.add(m)}else{if(("DOMChange"===p||"specificDOMChange"===p)&&!mida.preview.variant){var j,T=doc.documentElement;try{"specificDOMChange"===p&&u.dom_change_path&&(T=doc.querySelector(u.dom_change_path));let e=null;midaObs[m]||(mdChange[m]=!0,setTimeout(()=>{mdChange[m]=!1},500),midaObs[m]=new MutationObserver(function(){mdChange[m]||(mdChange[m]=!0,clearTimeout(e),e=setTimeout(()=>{mida.execute(m),setTimeout(()=>{mdChange[m]=!1},500)},500))}),j={attributes:!0,childList:!0,characterData:!0},midaObs[m].observe(T||doc.documentElement,j))}catch(e){console.error(e)}}mdWaitEl[m]&&clearInterval(mdWaitEl[m]),"waitFor"===p&&(mdWaitEl[m]=setInterval(()=>{doc.querySelector(u.dom_change_path)&&(mida.execute(m),clearInterval(mdWaitEl[m]))},10))}else mida.getCookie("mida_redirect")||setTimeout(()=>{showToast("Preview Err: the current setup targeting URL and the current URL do not match.")},3e3)}}setTimeout(()=>{mida.isLoaded=!0,mida.isRedirect||"function"==typeof win.rmfk&&win.rmfk()},100)};let getExperimentRoute=async(t,i=!1)=>{t.distribution;let e=[];win.abdata.length&&(e=win.abdata.map(e=>e.name));var n=pctDis(Number(t.traffic_allocation));let r;if(n){i?e.length&&(r=e[0]):r=null!==t.variation?t.variation:(e.push("-1"),0===Number(t.last_variant)&&(t.last_variant="-1"),(e=e.filter(e=>e!==t.last_variant))[Math.floor(Math.random()*e.length)]);n=win.abdata.filter(e=>e.name===r),n=n.length?n[0].name:0;try{let e={};var a=ls.getItem("_variant_result");(e=a?safeParse(a):e)[t.test_id]||i||(e[t.test_id]={vaId:n,uuid:win._h_uuid,complete:0}),i&&(e[t.test_id]={vaId:n,uuid:win._h_uuid,complete:0,personalize:1}),e[t.test_id]&&t.complete&&(e[t.test_id].complete=t.complete),win.vaId=JSON.stringify(e),mida.preview.id||ls.setItem("_variant_result",win.vaId)}catch(e){console.error(e)}}};function midaInit(){genSess().then(()=>{if(mdFirst||startMida(),!window.otag){if(win.mdq&&win.mdq.length)for(let e=0;e<win.mdq.length;e++)processMidaLayer(win.mdq[e]);win.mdq.pushToList=function(){try{Array.prototype.push.apply(this,arguments),processMidaLayer(Array.from(arguments)[0])}catch(e){}},win.mdq.push=win.mdq.pushToList,processPendingEvents()}let i={};_midaUrlParam.forEach(function(e,t){(t.startsWith("mida_")||t.startsWith("utm_")||"ref"===t||"referral"===t||"referrer"===t)&&e&&(i[t]=e)}),0<Object.keys(i).length&&mida.identify(i)}).catch(e=>{console.error(e)})}function _removeWww(e){return _removeTrail(e.toString().replace(/\/\/www\./g,"//").replace(/^(www\.)?/,""))}function _removeTrail(e){return e.toString().replace(/\/+$/,"")}function _noProtocol(e){return e.replace(/(^\w+:|^)\/\//,"")}function scrollPerc(e){var t=e.parentNode;return(e.scrollTop||t.scrollTop)/(t.scrollHeight-t.clientHeight)*100}function cleanSel(e){return e.replace(/\#[0-9]/,function(e){return e.replace("#","#\\3")}).replace(/\.[0-9]/,function(e){return e.replace(".",".\\3")})}function pctDis(e=100){return(()=>{var e=BigInt("0x"+win._h_uuid);let t=Number(e%BigInt(Number.MAX_SAFE_INTEGER));var e=Math.random,i=(Math.random=function(){var e=1e4*Math.sin(t++);return e-Math.floor(e)},Math.floor(100*Math.random()+1));return Math.random=e,i})()<e}function execReady(e,t,i){var n=()=>e(t,i);"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}function _mdLoad(t){if(!mdScripts.includes(t)){let e=doc.createElement("script");e.type="text/javascript",e.src=""+win.md_cdn+t,e.async=!0,e.crossorigin="anonymous",doc.body?doc.body.appendChild(e):doc.addEventListener("DOMContentLoaded",()=>{doc.body.appendChild(e)}),mdScripts.push(t)}}function processMidaLayer(e){var t=e[0],e=Array.prototype.slice.call(e,1);"function"==typeof mida[t]&&mida[t].apply(mida,e)}function findKeyAttribute(t){var i=doc.getElementsByTagName("script");let n=null;for(let e=0;e<i.length;e++){var r=i[e];if(r.src){let e=null;try{e=new win.URL(r.src)}catch(e){}if(e&&e.hostname===_noProtocol(win.md_cdn)){if(e.searchParams.has(t))return e.searchParams.get(t);if(r.getAttribute(t))return r.getAttribute(t)}else e&&e.searchParams.has(t)?n=e.searchParams.get(t):r.getAttribute(t)&&(n=r.getAttribute(t))}}return n||!1}function genSess(){return new Promise(async(t,e)=>{win.ga_device_id=mida.getCookie("_ga"),win.ga_uuid=win.ga_device_id.split(".").slice(2).join(".");var i=mida.getCookie("optimize_uuid")||win._h_uuid;i&&"undefined"!==i?(win._h_uuid=i,t()):(mdFirst=!0,mida.fetch("/init/uuid","POST",{key:win._h_key,ua:nav.userAgent,lang:nav.language,platform:nav.platform,height:win.screen.height,width:win.screen.width,color:win.screen.colorDepth,tz:Intl.DateTimeFormat().resolvedOptions().timeZone,r:doc.referrer,h:win.location.host,l:win.location.href,user_id:mida.user_id,gid:win.ga_uuid},e=>{e=safeParse(e);mida.setCookie("optimize_uuid",e.uuid),win._h_uuid=e.uuid,win._h_session=e.session,applyTest(e.setting,e.global),t()},!0))})}function urlRuleMatch(e,t){if(!e||!t)return!1;var i,n,e=JSON.parse(e);if(!e.length)return!1;function r(e,t,i){t=t.trim();let n=null;try{n=new RegExp(t)}catch(e){}function r(e){e.trim().startsWith("http")||(e="https://"+e);e=new URL(e);return(e.hostname+e.pathname).replace(/^www\./,"")}return"simple"===e?r(t)===r(i):"exact"===e?t===i:"regex"===e?n&&n.test(i):"contain"===e&&i.includes(t)}for(i of e)if(!i.allowed&&r(i.rule,i.url,t))return!1;let a=!1;for(n of e)if(n.allowed){if(r(n.rule,n.url,t))return!0;a=!0}return!a}function sendVariant(){return new Promise((t,e)=>{try{var i;mida.hasConsent?((i=ls.getItem("_variant_result"))&&(win.vaId=i),mida.fetch("/abtest/visitor","POST",{uuid:win._h_uuid,key:win._h_key,variation:win.vaId,bot:mdIsBot},()=>{t()})):t()}catch(e){t()}})}function applyTest(t,e=!1){if(mida.preview.id||ls.setItem("_abcache",t),win._abcache=t,e&&e.js&&(insertCustomElement(`function mgjs() { ${e.js} }`,"mgjs"),setTimeout(()=>{try{mgjs()}catch(e){}},20)),e&&e.css&&insertCustomElement(e.css,"mgcss","css"),!e)try{let e=JSON.parse(t);e=e.filter(e=>0!==Number(e.cache)),t=JSON.stringify(e)}catch(e){}"[]"!==t?win.midaTesting(t):setTimeout(()=>{"function"==typeof win.rmfk&&win.rmfk()},50),setTimeout(()=>{win.mfunc&&Array.isArray(win.mfunc)&&(win.mfunc.forEach(e=>{try{e()}catch(e){}}),win.mfunc=[]),sendVariant()},200)}function queryDB(){var e=mida.preview.id;mida.fetch("/test/setting2","POST",{k:win._h_key,h:win.location.host,url:win.location.href,lang:nav.language,r:doc.referrer,uuid:win._h_uuid,user_id:mida.user_id,gid:win.ga_uuid,preview:e},e=>{e=safeParse(e);win._h_session=e.session,applyTest(e.setting,e.global)},!0)}function _readParam(e){return new win.URL(win.location.href).searchParams.get(e)||""}function insertCustomElement(e,t,i="javascript"){var n;doc.getElementById(t)||((n=doc.createElement("css"===i?"style":"script")).setAttribute("id",t),n.setAttribute("type","text/"+i),t=doc.createTextNode(e),n.appendChild(t),doc.body.appendChild(n))}function startMida(){var e=ls.getItem("_abcache");win.md_cache&&!mida.preview.id&&e&&execReady(applyTest,e),e&&ls.removeItem("_abcache"),queryDB(),_mdLoad("/js/mida-integration.js?v="+cacheVersion)}var triggered=!1;function handleUserActivity(){triggered||(_mdLoad("/js/mida-event.js?v="+cacheVersion),_mdLoad("/js/mida-goal.js?v="+cacheVersion),setTimeout(()=>{mida.fetch("/widget/event/"+window._h_key,"GET",null,processEvent)},250),triggered=!0)}function processPendingEvents(){try{var e=JSON.parse(ls.getItem("md_pending_events")||"[]");e.length&&(ls.setItem("md_pending_events","[]"),e.forEach(e=>{console.log(e.event_text,e.event_property),mida.track(e.event_text,e.event_property)}))}catch(e){console.error("Failed to process pending events:",e)}}if(doc.addEventListener("mousemove",handleUserActivity),setTimeout(handleUserActivity,1e3),win.opener||editorKey){!win.opener&&editorKey&&execReady(_mdLoad,"/js/live-editor.js?v="+getTimestamp());const Pc="addEventListener"in win,Qc=Pc?"addEventListener":"attachEvent",Rc=Pc?"message":"onmessage";if(win[Qc](Rc,e=>{var{event_id:e,previewId:t,previewVariant:i}=e.data;"5959"===e?execReady(_mdLoad,"/js/live-editor.js?v="+getTimestamp()):"5960"===e&&Object.assign(mida.preview,{id:t,variant:i})},!1),win.opener)try{win.opener.postMessage({event_id:"5555",data:{status:"load-editor"}},"*")}catch(e){console.error(e)}}midaInit();